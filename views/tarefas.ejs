<%- include('partials/header') %>
<div class="card w95 first-card">
    <h2>📋 Gerenciador de Tarefas</h2>
    <p><%= description %></p>
</div>

<div class="card w95">
    <h3>📝 Suas Tarefas</h3>
    <div style="margin-top: 20px;">
        <% tasks.forEach(function(task) { %>
        <div style="background: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 10px; margin: 10px 0; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h4 style="margin: 0; color: <%= task.completed ? '#4ade80' : '#fbbf24' %>;" onclick="">
                    <%= task.completed ? '✅' : '⏳' %> <%= task.title %>
                </h4>
                <p style="margin: 5px 0 0 0; opacity: 0.8; font-size: 0.9rem;">
                    ID: <%= task.id %> | Status: <%= task.completed ? 'Concluída' : 'Pendente' %>
                </p>
            </div>
            <div>
                <% if (task.completed) { %>
                    <span style="color: #4ade80; font-weight: bold;">✅ Concluída</span>
                <% } else { %>
                    <span style="color: #fbbf24; font-weight: bold;">⏳ Pendente</span>
                <% } %>
            </div>
        </div>
        <% }); %>
    </div>
</div>

<div class="card w95">
    <h3>🧪 Teste da API de Tarefas</h3>
    <p>Teste as funcionalidades da API de tarefas:</p>
    <div class="buttons">
        <a href="/api/tarefas" class="btn">📋 Listar Tarefas (JSON)</a>
        <button onclick="testarCriarTarefa()" class="btn">➕ Criar Tarefa</button>
        <button onclick="testarAtualizarTarefa()" class="btn">🔄 Atualizar Tarefa</button>
        <button onclick="testarDeletarTarefa()" class="btn">🗑️ Deletar Tarefa</button>
    </div>
</div>

<div class="card w95">
    <h3>📊 Estatísticas</h3>
    <div class="stats">
        <div>
            <h4><%= tasks.filter(t => t.completed).length %></h4>
            <p>Concluídas</p>
        </div>
        <div>
            <h4><%= tasks.filter(t => !t.completed).length %></h4>
            <p>Pendentes</p>
        </div>
        <div>
            <h4><%= tasks.length %></h4>
            <p>Total</p>
        </div>
    </div>
</div>
